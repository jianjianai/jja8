<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=zh-CN lang=zh-cn><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.101.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>asdadasdas:强大的跨服数据同步插件第4代</title><meta name=description content><link type=text/css rel=stylesheet href=https://jja8.cn/css/整体效果.css><link type=text/css rel=stylesheet href=https://jja8.cn/css/文章.css><link rel="shortcut icon" href=https://jja8.cn//插件实验室.png></head><body><div id=导航栏><div id=网站标识><img class=网站图标 src=https://jja8.cn//插件实验室.png><div id=站点文本><h1 id=站点文本标题><span><a href=/ title=w.jja8.cn:88 rel=home>简的秘密基地</a></span></h1><span id=网站表示简介>jja8.cn</span></div></div><div><ul style=margin-right:14px><li class=导航栏列表><a href=/ target=_self>主页</a>
<a href=/tags target=_self>分类</a></li></ul></div></div><div id=主页面><div id=标题卡片 style=background-image:url(https://jja8.cn/KnapsackToGo4/KnapsackToGo2%e5%8a%9f%e8%83%bd%e4%bb%8b%e7%bb%8d.gif)><div id=文章元素背景><div id=文章元素框><h2 id=文章标题>asdadasdas</h2><p id=文章简介>强大的跨服数据同步插件第4代</p><p id=文章时间日期>2022-07-19 17:48</p><p id=文章提要>强大的跨服数据同步插件第4代</p></div></div></div><div id=文章内容框><div id=文章内容正文><h1 id=knapsacktogo4>KnapsackToGo4</h1><p>强大的跨服数据同步插件第4代。</p><p>可在多个服务器之间同步玩家数据，支持多种同步方式。</p><p>使用KnapsackToGo4可以轻松的完成多服务器之间的数据同步。</p><h1 id=支持>支持</h1><h2 id=自带的数据存储和同步方式>自带的数据存储和同步方式</h2><ul><li>文件</li><li>mysql</li><li>sqlite</li></ul><h2 id=自带的序列化方式>自带的序列化方式</h2><ul><li>Yaml</li></ul><h2 id=更多>更多</h2><p>使用扩展可以使插件支持更多的据存储同步方式和序列化方式</p><p>作者编写的扩展列表：
<a href=https://gitee.com/jja8/KnapsackToGo4Plugin/blob/master/README.md>https://gitee.com/jja8/KnapsackToGo4Plugin/blob/master/README.md</a></p><h1 id=如何保证数据安全>如何保证数据安全</h1><p>KnapsackToGo4使用的独占锁的方式，当玩家在一个服务器中的时其他服务器无法读取。</p><p>下面是两个mc客户端登录同一个游戏账号进入安装了KnapsackToGo4并且互相同步的服务器的演示。</p><p><img src=%E5%9B%BE%E7%89%87/%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8.gif alt=asd></p><h1 id=为什么写这款插件>为什么写这款插件</h1><p>KnapsackToGo2插件已经有很多服务器在使用了，并且功能也挺完善。
但是仍然存在一些问题，例如：服务器崩溃后玩家再次进入服务器就需要等待许久。
我自己对KnapsackToGo2也是不满意的，
在开发完KnapsackToGo2之后我又继续开发了许多插件，也学习到了很多编程经验，我感觉我的编程技术有了很大的进步。
在总结了前几代插件的毛病和逻辑上的问题后，我想到了一种新的方案。于是我决定重新编写了一个更好的KnapsackToGo4。
这次全新的KnapsackToGo4是在总结了前面所有失败的经验后完全重新编写的，运行逻辑也是最合理符合直觉的。</p><p>ps：
为什么新一代叫KnapsackToGo4而不是KnapsackToGo3呢?
因为KnapsackToGo3在很久之前就写完了，但是因为问题太多所以就弃坑了。</p><h2 id=相较于knapsacktogo2的提升>相较于KnapsackToGo2的提升</h2><ul><li>拥有更多同步方式</li><li>更强大的扩展性</li><li>解决了服务器崩溃死锁的问题</li></ul><h1 id=使用方法>使用方法</h1><h2 id=名词定义>名词定义</h2><h4 id=数据容器>数据容器</h4><p>存储数据的方式。用来存数据。比如记录文字可以用纸和笔，也可以用电脑或手机，还可以刻在石头上。</p><h4 id=数据序列化>数据序列化</h4><p>加载和保存数据的方式。比如你可以用汉语表达信息，也可以用英语表达信息。</p><h2 id=注意>注意</h2><p>请认真读完注意事项，避免发生数据丢失。</p><p>PlayerDataCase.yml和PlayerDataSerialize.yml请在开服之前配置好后就不要再修改，否则会丢失数据。</p><p>PlayerDataCase.yml是数据容器，也就是存储数据的方式。一旦设置好后就不要修改了。</p><p>PlayerDataSerialize.yml是数据序列化，是表示数据的方式。一旦设置好后就不要修改了。</p><p>如果使用了数据容器类扩展PlayerDataCase.yml将无效。插件在识别到扩展的情况下不会生成PlayerDataCase.yml文件，说明安装成功。例如安装了MongoDB数据库的扩展，请删除PlayerDataCase.yml配置文件。</p><p>如果使用了数据序列化类扩展PlayerDataSerialize.yml文件将无效。插件在识别到扩展的情况下不会生成PlayerDataSerialize.yml文件，说明安装成功。例如安装了NBT序列化的扩展，请删除PlayerDataSerialize.yml配置文件。</p><p>如果需要你的服务器已经有许多的玩家数据了，请不要安装或者删除如何扩展。因为很有可能造成数据丢失。</p><p>请尽量在插件第一次加载时就将所以扩展安装好，插件在识别到数据容器类扩展的情况下不会生成PlayerDataCase.yml文件，在识别到数据序列化扩展的情况下不会生成PlayerDataSerialize.yml文件。</p><p>如果在开发环境，需要修改PlayerDataSerialize.yml或者安装或删除序列化类扩展，请先清除数据容器中的全部数据。使用的文件就删除文件，使用的数据库就删除表。</p><h2 id=关于配置文件>关于配置文件</h2><h3 id=核心配置文件>核心配置文件</h3><p>KnapsackToGo4SetUp.yml 是插件核心逻辑的配置文件。保持默认就行，一般不需要修改。</p><ul><li>KnapsackToGo4SetUp.yml 插件初始化配置文件。</li></ul><p>playerDataConfig.yml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>AutoSave</span>: <span style=color:#ae81ff>250</span>   <span style=color:#75715e>#自动保存时间，单位是秒</span>
</span></span><span style=display:flex><span><span style=color:#f92672>LockDetectionInterval</span>: <span style=color:#ae81ff>250</span>   <span style=color:#75715e>#查询锁间隔，单位是毫秒</span>
</span></span><span style=display:flex><span><span style=color:#f92672>lang</span>: <span style=color:#75715e>#语言</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>isLoading</span>: <span style=color:#ae81ff>正在加载你的数据，请稍等..&lt;数&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>loadingFinish</span>: <span style=color:#ae81ff>欢迎！</span>
</span></span></code></pre></div><h3 id=其他配置文件>其他配置文件</h3><ul><li>PlayerDataCase.yml 选择序列数据容器的配置文件</li><li>PlayerDataSerialize.yml 选择数据序列化方法的配置文件</li></ul><p>为什么不是核心配置文件？</p><p>PlayerDataCase.yml是告诉插件要注册什么数据容器，其实容器类扩展的功能就是注册自己的数据容器，所以在有扩展的时候不会生成PlayerDataCase.yml配置文件。</p><p>PlayerDataSerialize.yml是告诉插件要注册什么序列化方法，其实序列化扩展就是注册自己的序列化方法，所以在有扩展的时候就不会生成PlayerDataSerialize.yml配置文件。</p><p>目前插件有三种数据容器，一种序列化方法。</p><p>PlayerDataCase.yml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>playerDataCaseType</span>: <span style=color:#ae81ff>Mysql </span> <span style=color:#75715e>#填下方容器列表的其中一种就行了</span>
</span></span></code></pre></div><p>PlayerDataSerialize.yml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>playerDataSerializeType</span>: <span style=color:#ae81ff>Yaml </span> <span style=color:#75715e>#填下方序列化方法列表的其中一种就行了</span>
</span></span></code></pre></div><p>为什么需要这两个文件？</p><p>因为插件里自带了多种数据容器和序列化方法，所以需要这两个文件来告诉插件你要用哪一个。</p><p>为什么安装相应的扩展就不需对应的文件了？</p><p>因为安装扩展就相当于已经选择扩展作为数据容器或序列化方法了，所以自然不需要了。</p><h4 id=容器列表>容器列表</h4><h5 id=file>File</h5><p>用文件的方法存储数据</p><h5 id=sqlite>Sqlite</h5><p>一款轻型的数据库，储存在单一文件中的一个完整的数据库，无需安装和管理配置。</p><h5 id=mysql>Mysql</h5><p>一款轻量级数据库，通过网络连接。</p><h4 id=序列化方法列表>序列化方法列表</h4><h5 id=yaml>Yaml</h5><p>bukkit专有的一种序列化方式，只有bukkit可用，其他服务端均不可用。</p><p>优点：自定义选项多，扩展性好，版本兼容性强，支持各种数据的同步的开关。</p><p>缺点：只支持bukkit</p><h5 id=nbt--未完成>NBT （未完成）</h5><p>使用NMS完成玩家的数据序列化，也就是直接调用nte.minecraft.server来序列化，也就是直接调用原版核心。</p><p>优点：跨平台性好，数据存储效率高（占磁盘空间小），MOD兼容性能强。</p><p>缺点：必须同步全部数据，版本兼容性差。</p><p>开发计划：只计划开发1.16.5以及其他mod多的版本。</p><h3 id=插件自带的数据容器的配置文件>插件自带的数据容器的配置文件</h3><h4 id=file-1>File</h4><p>FileDataCaseSetUp.yml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>file</span>: <span style=color:#ae81ff>&lt;文件位置&gt; </span> <span style=color:#75715e>#这里填写数据保存到的文件夹路径</span>
</span></span></code></pre></div><h4 id=sqlite-1>Sqlite</h4><p>MysqlDataCaseSetUp.yml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>userName</span>: <span style=color:#ae81ff>root</span> <span style=color:#75715e>#用户名</span>
</span></span><span style=display:flex><span><span style=color:#f92672>PassWord</span>: <span style=color:#ae81ff>778899</span>&amp; <span style=color:#75715e>#密码</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dataBaseURL</span>: <span style=color:#ae81ff>jdbc:mysql://127.0.0.1/KnapsackToGo4</span> <span style=color:#75715e>#数据库URL</span>
</span></span><span style=display:flex><span><span style=color:#f92672>holdLockTime</span>: <span style=color:#ae81ff>30000</span> <span style=color:#75715e>#持有锁时间，数值越小数据库更新越频繁，但是服务器崩溃后自解锁越快。如果服务器基本不崩溃可以适当地设置长一点。但是设置太长了服务器如果突然崩溃就要等很久。</span>
</span></span></code></pre></div><h4 id=mysql-1>Mysql</h4><p>SqliteDataCaseSetUp.yml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>userName</span>: <span style=color:#ae81ff>root</span> <span style=color:#75715e>#用户名</span>
</span></span><span style=display:flex><span><span style=color:#f92672>PassWord</span>: <span style=color:#ae81ff>778899</span>&amp; <span style=color:#75715e>#密码</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dataBaseURL</span>: <span style=color:#ae81ff>jdbc:sqlite:C://knapsackToGo4/playerData.db</span> <span style=color:#75715e>#数据库URL</span>
</span></span><span style=display:flex><span><span style=color:#f92672>holdLockTime</span>: <span style=color:#ae81ff>30000</span> <span style=color:#75715e>#持有锁时间，数值越小数据库更新越频繁，但是服务器崩溃后自解锁越快。如果服务器基本不崩溃可以适当地设置长一点。但是设置太长了服务器如果突然崩溃就要等很久。</span>
</span></span></code></pre></div><h3 id=插件自带的序列化方法的配置文件>插件自带的序列化方法的配置文件</h3><h4 id=yaml-1>Yaml</h4><p>YamlDataSerializeSetUp.yml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>AdvancementProgress</span>: <span style=color:#66d9ef>false</span> <span style=color:#75715e>#进度</span>
</span></span><span style=display:flex><span><span style=color:#f92672>EnderChest</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e>#末影箱</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Experience</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e>#经验</span>
</span></span><span style=display:flex><span><span style=color:#f92672>FoodLevel</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e>#饱食度</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Health</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e>#血量</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Inventory</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e>#物品栏</span>
</span></span><span style=display:flex><span><span style=color:#f92672>PotionEffects</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e>#药水效果</span>
</span></span></code></pre></div><h3 id=扩展的配置文件>扩展的配置文件</h3><p>扩展也会生成相应的配置文件，也许在KnapsackToGo4的文件夹中，也可能在扩展插件对应的文件夹中。去参考扩展的文档配置。</p><h1 id=建议与反馈>建议与反馈</h1><p>issues：<a href=https://gitee.com/jja8/KnapsackToGo4/issues>Issues · 简简爱/KnapsackToGo4</a></p><p>插件实验室：<a href="https://jq.qq.com/?_wv=1027&k=LyeQlfSK">PlugClub / 插件实验室</a> （群号:820131534）</p></div></div></div><div id=页脚><div class=页脚内容><p>本设计由简.精心制作</p><a href=/>Copyright © 2016-2020 简的秘密基地. All rights reserved.</a></div></div></body></html>